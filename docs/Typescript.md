# Typescript

The internal code of CraftJS is written in [Typescript](https://www.typescriptlang.org), a typed superset of Javascript that allows for better scaling and more enjoyable programming experience. `types` -folder contains Typescript declarations generated from Spigot's (and connected libraries') java typings. Due to fundamental differences between Typescript/Javascript and Java, and also general lack of effort, they are not perfect, but in my experience it's been very much enough.

## Generation

Declarations can be generated by executing `generateTypescriptDefinitions()` in CraftJS Graal Javascript-context, for example by executing `js generateTypescriptDefinitions()` -command in the server console.

The generation code is written in Typescript, and it works by taking use of Java's [reflection API](https://www.oracle.com/technical-resources/articles/java/javareflection.html).

### Javadocs

By default, compiled Java files do not contain information about method parameter names, Javadoc-comments and information about nullability.  [Javadocs](../javadocs/README.md) -folder contains a small program to extract this missing data to a form that the declaration generation code can easily consume and make use of. It's not ideal or perfect, but it's a lot better than nothing. Currently this is only used for Spigot's classes, mostly due to differences between the exact formats of Javadoc-webpages between projects.