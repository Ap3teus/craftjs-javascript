"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const java_lang_1 = require("java.lang");
const org_bukkit_plugin_1 = require("org.bukkit.plugin");
function getSpigotMethod(name) {
    const long = java.lang.Long.class.getField('TYPE').get(null);
    const c = server.getScheduler().class;
    const params = [org_bukkit_plugin_1.Plugin.class, java_lang_1.Runnable.class, long].concat(name === 'runTaskTimer' ? [long] : []);
    const method = c.getMethod(name, ...params);
    return (...args) => method.invoke(server.getScheduler(), ...args);
}
function getRunnable(callback) {
    const Task = Java.extend(java_lang_1.Runnable, {
        run() {
            callback();
        },
    });
    return new Task();
}
function setInterval(handler, delay) {
    const runnable = getRunnable(handler);
    const runTaskLater = getSpigotMethod('runTaskTimer');
    const task = runTaskLater(__plugin, runnable, delay / 50, delay / 50);
    return task.getTaskId();
}
function clearInterval(tid) {
    if (!tid) {
        return;
    }
    server.scheduler.cancelTask(tid);
}
function setTimeout(handler, delay) {
    const runnable = getRunnable(handler);
    const runTaskLater = getSpigotMethod('runTaskLater');
    const task = runTaskLater(__plugin, runnable, delay / 50);
    return task.getTaskId();
}
global.setInterval = setInterval;
global.setTimeout = setTimeout;
global.clearInterval = clearInterval;
global.clearTimeout = clearInterval;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZWR1bGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY2hlZHVsaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseUNBQStEO0FBRS9ELHlEQUEyQztBQUUzQyxTQUFTLGVBQWUsQ0FBQyxJQUFxQztJQUM1RCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3RCxNQUFNLENBQUMsR0FBSSxNQUFNLENBQUMsWUFBWSxFQUFVLENBQUMsS0FFeEMsQ0FBQztJQUNGLE1BQU0sTUFBTSxHQUFHLENBQUUsMEJBQWMsQ0FBQyxLQUFLLEVBQUcsb0JBQWdCLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FDMUUsSUFBSSxLQUFLLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUN0QyxDQUFDO0lBQ0YsTUFBTSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxNQUFNLENBQVEsQ0FBQztJQUNuRCxPQUFPLENBQUMsR0FBRyxJQUFXLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDM0UsQ0FBQztBQUVELFNBQVMsV0FBVyxDQUFDLFFBQW9CO0lBQ3ZDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQVEsRUFBRTtRQUNqQyxHQUFHO1lBQ0QsUUFBUSxFQUFFLENBQUM7UUFDYixDQUFDO0tBQ0YsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxJQUFJLElBQUksRUFBRSxDQUFDO0FBQ3BCLENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FBQyxPQUFtQixFQUFFLEtBQWE7SUFDckQsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sWUFBWSxHQUFHLGVBQWUsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUNyRCxNQUFNLElBQUksR0FBRyxZQUFZLENBQ3ZCLFFBQVEsRUFDUixRQUFRLEVBQ1IsS0FBSyxHQUFHLEVBQUUsRUFDVixLQUFLLEdBQUcsRUFBRSxDQUNHLENBQUM7SUFDaEIsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDMUIsQ0FBQztBQUVELFNBQVMsYUFBYSxDQUFDLEdBQVk7SUFDakMsSUFBSSxDQUFDLEdBQUcsRUFBRTtRQUNSLE9BQU87S0FDUjtJQUNELE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ25DLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxPQUFtQixFQUFFLEtBQWE7SUFDcEQsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sWUFBWSxHQUFHLGVBQWUsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUNyRCxNQUFNLElBQUksR0FBRyxZQUFZLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFLLEdBQUcsRUFBRSxDQUFlLENBQUM7SUFDeEUsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDMUIsQ0FBQztBQUVELE1BQU0sQ0FBQyxXQUFXLEdBQUcsV0FBa0IsQ0FBQztBQUN4QyxNQUFNLENBQUMsVUFBVSxHQUFHLFVBQWlCLENBQUM7QUFDdEMsTUFBTSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7QUFDckMsTUFBTSxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUMifQ==