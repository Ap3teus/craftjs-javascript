"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const parser_1 = require("./parser");
const java_io_1 = require("java.io");
function getClassRef(ref) {
    if (ref.package === '') {
        return ref.name;
    }
    const path = [ref.package, ref.name].join('.').split('.').join('_');
    return path;
}
function parseName(name) {
    if (name === 'function')
        return 'func';
    if (name === 'in')
        return 'inp';
    if (name === 'with')
        return 'wit';
    return name;
}
function generateTypeDefinition(type, deps) {
    const wrap = (str) => (type.isArray ? `JArray<${str}>` : str);
    const suffix = type.isArray ? '[]' : '';
    if (typeof type.baseClass !== 'string') {
        if (['int', 'long', 'double', 'float', 'byte', 'short'].indexOf(type.baseClass.name) !== -1) {
            return wrap('number');
        }
        if (type.baseClass.name === 'char') {
            return wrap('string');
        }
        if (type.baseClass.name === 'String' &&
            type.baseClass.package === 'java.lang') {
            return wrap('string');
        }
        if (['boolean', 'void'].indexOf(type.baseClass.name) !== -1) {
            return type.baseClass.name;
        }
        deps.push(type.baseClass);
    }
    const baseType = typeof type.baseClass === 'string'
        ? type.baseClass
        : getClassRef(type.baseClass);
    const typeArgs = type.typeArguments.map((t) => 'baseClass' in t
        ? generateTypeDefinition(t, deps)
        : t.extends
            ? generateTypeDefinition(t.extends, deps)
            : 'any');
    return wrap(`${baseType}${typeArgs.length > 0 ? `<${typeArgs.join(', ')}>` : ''}`);
}
function generateTypeParamDefinition({ name, extends: ex }, deps) {
    return `${name}${ex ? ` extends ${generateTypeDefinition(ex, deps)}` : ''}`;
}
function generateMethodDefinition(method, deps) {
    const paramDefs = method.parameters.map((p) => `${p.spread ? '...' : ''}${parseName(p.name)}: ${generateTypeDefinition(p.type, deps)}${p.nullable ? ' | null' : ''}`);
    const returnDef = 'returnType' in method
        ? generateTypeDefinition(method.returnType, deps)
        : '';
    const nullableDef = method.nullable ? ' | null' : '';
    const typeParams = method.typeParameters.map((t) => generateTypeParamDefinition(t, deps));
    return `${method.docs ? `/** ${method.docs} */\n` : ''}${method.isStatic ? 'static ' : ''}${parseName(method.name)}${typeParams.length > 0 ? `<${typeParams.join(', ')}>` : ''}(${paramDefs.join(', ')})${returnDef ? `: ${returnDef}${nullableDef}` : ''};`;
}
exports.generateMethodDefinition = generateMethodDefinition;
function generatePropertyDefinition(property, deps) {
    if (property.name === 'constructor') {
        return '';
    }
    const nullableDef = property.nullable ? ' | null' : '';
    const typeDef = generateTypeDefinition(property.type, deps);
    return `${property.docs ? `/** ${property.docs} */\n` : ''}${property.isStatic ? 'static ' : ''}${property.name}: ${typeDef}${nullableDef};`;
}
function generateImportDefinitions(deps) {
    const set = {};
    deps.forEach((d) => (set[d.package] = set[d.package]
        ? Object.assign(Object.assign({}, set[d.package]), { [d.name]: d }) : { [d.name]: d }));
    const imports = Object.keys(set)
        .map((k) => {
        const subImports = Object.keys(set[k]);
        return (k &&
            `import { ${subImports
                .map((s) => `${s} as ${getClassRef(set[k][s])}`)
                .join(', ')} } from '${k}';`);
    })
        .filter((i) => i);
    return imports;
}
function generateClassDefinition(clazz) {
    const dependencies = [];
    if (clazz.ref.name === 'Object' && clazz.ref.package === 'java.lang') {
        return {
            definition: `
declare module '${clazz.ref.package}' {  
  export type ${clazz.ref.name} = {}
}`,
            dependencies: [],
        };
    }
    const methodDefs = clazz.methods
        .map((m) => generateMethodDefinition(m, dependencies))
        .sort();
    const getters = clazz.methods.filter((m) => m.name.match(/^get[A-Z]/g));
    const getterFields = getters.map((g) => {
        const replaced = g.name.replace(/^get/, '');
        return Object.assign(Object.assign({}, g), { type: g.returnType, name: replaced[0].toLocaleLowerCase() + replaced.slice(1) });
    });
    const constructorDefs = clazz.constructors
        .map((c) => generateMethodDefinition(c, dependencies))
        .sort();
    const propDefs = clazz.properties
        .concat(getterFields)
        .filter((p) => p.isPublic)
        .map((p) => generatePropertyDefinition(p, dependencies))
        .sort();
    const extend = clazz.extends
        ? generateTypeDefinition(clazz.extends, dependencies)
        : undefined;
    const impls = clazz.implements.map((i) => generateTypeDefinition(i, dependencies));
    const typeParams = clazz.typeParameters.map((t) => generateTypeParamDefinition(t, dependencies));
    const imports = generateImportDefinitions(dependencies);
    return {
        definition: `
declare module '${clazz.ref.package}' {
${imports.join('\n')}
${clazz.docs ? `/** ${clazz.docs} */\n` : ''}
  export class ${clazz.ref.name}${typeParams.length > 0 ? `<${typeParams.join(', ')}>` : ''}${extend ? ` extends ${extend}` : ''}${impls.length > 0 ? ` implements ${impls.join(', ')}` : ''} {
${propDefs.join('\n')}
${methodDefs.join('\n')}
${constructorDefs.join('\n')}
  }
}`,
        dependencies,
    };
}
exports.generateClassDefinition = generateClassDefinition;
function getClass(ref) {
    try {
        const jClass = Java.type(`${ref.package}.${ref.name}`);
        return parser_1.parseClass(jClass.class);
    }
    catch (_a) {
        console.error(`Error parsing ${ref.package}.${ref.name}`);
        return null;
    }
}
function recursiveDefs(clazz, defs, visited) {
    const root = generateClassDefinition(clazz);
    defs.push({
        ref: clazz.ref,
        def: root.definition,
    });
    for (const dep of root.dependencies) {
        const current = getClassRef(dep);
        if (visited.indexOf(current) !== -1) {
            continue;
        }
        visited.push(current);
        const c = getClass(dep);
        if (!c) {
            continue;
        }
        recursiveDefs(c, defs, visited);
    }
}
function generateRecursiveDef(root) {
    const defs = [];
    const visited = [getClassRef(root.ref)];
    recursiveDefs(root, defs, visited);
    return defs;
}
exports.generateRecursiveDef = generateRecursiveDef;
function runTheThing() {
    const cFile = new java_io_1.File(__jsdir, `internal/src/ts/classes.txt`);
    const spigotClasses = readFile(cFile.getPath()).split('\n');
    const defs = [];
    const visited = [];
    for (const c of spigotClasses) {
        console.log(c);
        try {
            const jClass = Java.type(c).class;
            const parsed = parser_1.parseClass(jClass);
            visited.push(getClassRef(parsed.ref));
            recursiveDefs(parsed, defs, visited);
        }
        catch (e) {
            console.error(e);
            continue;
        }
    }
    const contents = {};
    for (const d of defs) {
        const path = [d.ref.package, d.ref.name].join('.').split('.');
        const filePath = path.slice(0, 2).join('_');
        const f = `./js/types/generated/${filePath}.d.ts`;
        contents[f] = contents[f]
            ? `${contents[f]}\n//@ts-nocheck\n${d.def}`
            : `//@ts-nocheck\n${d.def}`;
    }
    for (const file in contents) {
        writeFile(file, contents[file]);
    }
}
exports.runTheThing = runTheThing;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90cy9nZW5lcmF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBU2tCO0FBQ2xCLHFDQUErQjtBQUUvQixTQUFTLFdBQVcsQ0FBQyxHQUFhO0lBQ2hDLElBQUksR0FBRyxDQUFDLE9BQU8sS0FBSyxFQUFFLEVBQUU7UUFDdEIsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDO0tBQ2pCO0lBQ0QsTUFBTSxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwRSxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFFRCxTQUFTLFNBQVMsQ0FBQyxJQUFZO0lBQzdCLElBQUksSUFBSSxLQUFLLFVBQVU7UUFBRSxPQUFPLE1BQU0sQ0FBQztJQUN2QyxJQUFJLElBQUksS0FBSyxJQUFJO1FBQUUsT0FBTyxLQUFLLENBQUM7SUFDaEMsSUFBSSxJQUFJLEtBQUssTUFBTTtRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQ2xDLE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQztBQUVELFNBQVMsc0JBQXNCLENBQUMsSUFBVSxFQUFFLElBQWdCO0lBQzFELE1BQU0sSUFBSSxHQUFHLENBQUMsR0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RFLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRXhDLElBQUksT0FBTyxJQUFJLENBQUMsU0FBUyxLQUFL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